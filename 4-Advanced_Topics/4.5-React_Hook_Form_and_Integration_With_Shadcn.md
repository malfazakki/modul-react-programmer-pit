# BAB 4.5: React Hook Form dan Integrasi dengan shadcn/ui

## Tujuan Pembelajaran

*   Memahami konsep React Hook Form dan keunggulannya dalam pengelolaan form.
*   Mampu mengimplementasikan form handling dengan React Hook Form di React 19.
*   Mampu mengintegrasikan React Hook Form dengan shadcn/ui 3.4.2 dan Tailwind CSS 4.
*   Memahami teknik validasi form yang efektif dan user-friendly.
*   Mampu mengimplementasikan form patterns seperti multi-step forms dan dynamic forms.
*   Mampu mengoptimalkan performa form dan mengintegrasikan dengan external libraries.

## Materi Pembelajaran

### 1. Pengenalan React Hook Form

React Hook Form adalah library performatif untuk pengelolaan form di React yang menggunakan uncontrolled components dengan minimal re-renders. Library ini lebih efisien dibanding controlled components tradisional.

#### a. Mengapa React Hook Form?

- **Performance**: Minimal re-renders dengan uncontrolled components
- **Bundle Size**: Lebih kecil dibanding Formik atau Redux Form
- **Developer Experience**: API yang intuitif dan mudah digunakan
- **TypeScript Support**: Full TypeScript support dengan auto-completion
- **Validation**: Integrasi mudah dengan berbagai library validasi

#### b. Setup dan Instalasi

```bash
# Install React Hook Form dan dependencies
npm install react-hook-form @hookform/resolvers zod
npm install @radix-ui/react-slot
```

```typescript
// src/main.tsx atau src/index.tsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App.tsx'
import './index.css'

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)
```

### 2. Basic Form dengan React Hook Form

#### a. Simple Form Implementation

```typescript
// src/components/BasicForm.tsx
import { useForm } from 'react-hook-form'

interface FormData {
  firstName: string
  lastName: string
  email: string
}

export default function BasicForm() {
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
  } = useForm<FormData>()

  const onSubmit = async (data: FormData) => {
    // Simulate API call
    await new Promise(resolve => setTimeout(resolve, 1000))
    console.log(data)
  }

  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-4">
      <div>
        <input
          {...register('firstName', { required: 'First name is required' })}
          placeholder="First Name"
          className="w-full px-3 py-2 border rounded-md"
        />
        {errors.firstName && (
          <p className="text-sm text-red-600">{errors.firstName.message}</p>
        )}
      </div>

      <div>
        <input
          {...register('lastName', { required: 'Last name is required' })}
          placeholder="Last Name"
          className="w-full px-3 py-2 border rounded-md"
        />
        {errors.lastName && (
          <p className="text-sm text-red-600">{errors.lastName.message}</p>
        )}
      </div>

      <div>
        <input
          {...register('email', {
            required: 'Email is required',
            pattern: {
              value: /^\S+@\S+$/i,
              message: 'Invalid email address'
            }
          })}
          placeholder="Email"
          className="w-full px-3 py-2 border rounded-md"
        />
        {errors.email && (
          <p className="text-sm text-red-600">{errors.email.message}</p>
        )}
      </div>

      <button
        type="submit"
        disabled={isSubmitting}
        className="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50"
      >
        {isSubmitting ? 'Submitting...' : 'Submit'}
      </button>
    </form>
  )
}
```

### 3. Integrasi dengan shadcn/ui

#### a. Setup shadcn/ui dengan React 19 dan Tailwind CSS 4

```bash
# Install shadcn/ui CLI
npx shadcn@latest init

# Install Component button dan input
npx shadcn@latest add button input
```

#### b. Form dengan shadcn/ui Components

```typescript
// src/components/FormWithShadcn.tsx
import { useForm } from 'react-hook-form'
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'

interface FormData {
  username: string
  email: string
  password: string
}

export default function FormWithShadcn() {
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
  } = useForm<FormData>()

  const onSubmit = async (data: FormData) => {
    await new Promise(resolve => setTimeout(resolve, 1000))
    console.log(data)
  }

  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-4 max-w-md">
      <div className="space-y-2">
        <Input
          {...register('username', {
            required: 'Username is required',
            minLength: {
              value: 3,
              message: 'Username must be at least 3 characters'
            }
          })}
          placeholder="Username"
        />
        {errors.username && (
          <p className="text-sm text-red-600">{errors.username.message}</p>
        )}
      </div>

      <div className="space-y-2">
        <Input
          {...register('email', {
            required: 'Email is required',
            pattern: {
              value: /^\S+@\S+$/i,
              message: 'Invalid email address'
            }
          })}
          type="email"
          placeholder="Email"
        />
        {errors.email && (
          <p className="text-sm text-red-600">{errors.email.message}</p>
        )}
      </div>

      <div className="space-y-2">
        <Input
          {...register('password', {
            required: 'Password is required',
            minLength: {
              value: 8,
              message: 'Password must be at least 8 characters'
            }
          })}
          type="password"
          placeholder="Password"
        />
        {errors.password && (
          <p className="text-sm text-red-600">{errors.password.message}</p>
        )}
      </div>

      <Button type="submit" disabled={isSubmitting} className="w-full">
        {isSubmitting ? 'Creating Account...' : 'Create Account'}
      </Button>
    </form>
  )
}
```

### 4. Advanced Form Patterns

#### a. Multi-Step Form dengan Progress

```typescript
// src/components/MultiStepForm.tsx
import { useState } from 'react'
import { useForm, SubmitHandler } from 'react-hook-form'
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import { Progress } from '@/components/ui/progress'

interface FormData {
  // Step 1
  firstName: string
  lastName: string
  email: string
  // Step 2
  company: string
  position: string
  // Step 3
  bio: string
  website: string
}

const steps = [
  { id: 1, title: 'Personal Info' },
  { id: 2, title: 'Professional Info' },
  { id: 3, title: 'Additional Info' }
]

export default function MultiStepForm() {
  const [currentStep, setCurrentStep] = useState(1)
  const {
    register,
    handleSubmit,
    formState: { errors },
    trigger
  } = useForm<FormData>()

  const nextStep = async () => {
    const fields = getFieldsForStep(currentStep)
    const isValid = await trigger(fields as any)
    if (isValid) setCurrentStep(prev => Math.min(prev + 1, steps.length))
  }

  const prevStep = () => {
    setCurrentStep(prev => Math.max(prev - 1, 1))
  }

  const getFieldsForStep = (step: number) => {
    switch (step) {
      case 1: return ['firstName', 'lastName', 'email']
      case 2: return ['company', 'position']
      case 3: return ['bio', 'website']
      default: return []
    }
  }

  const onSubmit: SubmitHandler<FormData> = (data) => {
    console.log('Final submission:', data)
  }

  const progress = (currentStep / steps.length) * 100

  return (
    <div className="max-w-2xl mx-auto p-6">
      <div className="mb-8">
        <Progress value={progress} className="w-full" />
        <div className="flex justify-between mt-2">
          {steps.map((step) => (
            <div
              key={step.id}
              className={`text-sm ${currentStep >= step.id ? 'text-blue-600' : 'text-gray-400'}`}
            >
              {step.title}
            </div>
          ))}
        </div>
      </div>

      <form onSubmit={handleSubmit(onSubmit)} className="space-y-6">
        {currentStep === 1 && (
          <div className="space-y-4">
            <h2 className="text-2xl font-bold">Personal Information</h2>
            <div>
              <Input
                {...register('firstName', { required: 'First name is required' })}
                placeholder="First Name"
              />
              {errors.firstName && (
                <p className="text-sm text-red-600 mt-1">{errors.firstName.message}</p>
              )}
            </div>
            <div>
              <Input
                {...register('lastName', { required: 'Last name is required' })}
                placeholder="Last Name"
              />
              {errors.lastName && (
                <p className="text-sm text-red-600 mt-1">{errors.lastName.message}</p>
              )}
            </div>
            <div>
              <Input
                {...register('email', {
                  required: 'Email is required',
                  pattern: /^\S+@\S+$/i
                })}
                type="email"
                placeholder="Email"
              />
              {errors.email && (
                <p className="text-sm text-red-600 mt-1">{errors.email.message}</p>
              )}
            </div>
          </div>
        )}

        {currentStep === 2 && (
          <div className="space-y-4">
            <h2 className="text-2xl font-bold">Professional Information</h2>
            <div>
              <Input
                {...register('company', { required: 'Company is required' })}
                placeholder="Company"
              />
              {errors.company && (
                <p className="text-sm text-red-600 mt-1">{errors.company.message}</p>
              )}
            </div>
            <div>
              <Input
                {...register('position', { required: 'Position is required' })}
                placeholder="Position"
              />
              {errors.position && (
                <p className="text-sm text-red-600 mt-1">{errors.position.message}</p>
              )}
            </div>
          </div>
        )}

        {currentStep === 3 && (
          <div className="space-y-4">
            <h2 className="text-2xl font-bold">Additional Information</h2>
            <div>
              <textarea
                {...register('bio', { required: 'Bio is required' })}
                placeholder="Tell us about yourself"
                className="w-full px-3 py-2 border rounded-md min-h-[100px]"
              />
              {errors.bio && (
                <p className="text-sm text-red-600 mt-1">{errors.bio.message}</p>
              )}
            </div>
            <div>
              <Input
                {...register('website')}
                placeholder="Website (optional)"
              />
            </div>
          </div>
        )}

        <div className="flex justify-between">
          <Button
            type="button"
            variant="outline"
            onClick={prevStep}
            disabled={currentStep === 1}
          >
            Previous
          </Button>

          {currentStep < steps.length ? (
            <Button type="button" onClick={nextStep}>
              Next
            </Button>
          ) : (
            <Button type="submit">
              Submit
            </Button>
          )}
        </div>
      </form>
    </div>
  )
}
```

#### b. Dynamic Form dengan Array Fields

```typescript
// src/components/DynamicForm.tsx
import { useFieldArray, useForm } from 'react-hook-form'
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'

interface FormData {
  projectName: string
  teamMembers: {
    name: string
    email: string
    role: string
  }[]
}

export default function DynamicForm() {
  const {
    register,
    control,
    handleSubmit,
    formState: { errors }
  } = useForm<FormData>({
    defaultValues: {
      projectName: '',
      teamMembers: [{ name: '', email: '', role: '' }]
    }
  })

  const { fields, append, remove } = useFieldArray({
    control,
    name: 'teamMembers'
  })

  const onSubmit = (data: FormData) => {
    console.log(data)
  }

  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-6 max-w-2xl">
      <div>
        <Input
          {...register('projectName', { required: 'Project name is required' })}
          placeholder="Project Name"
        />
        {errors.projectName && (
          <p className="text-sm text-red-600 mt-1">{errors.projectName.message}</p>
        )}
      </div>

      <div className="space-y-4">
        <h3 className="text-lg font-semibold">Team Members</h3>

        {fields.map((field, index) => (
          <div key={field.id} className="p-4 border rounded-lg space-y-3">
            <div className="flex justify-between items-center">
              <h4 className="font-medium">Member {index + 1}</h4>
              {fields.length > 1 && (
                <Button
                  type="button"
                  variant="destructive"
                  size="sm"
                  onClick={() => remove(index)}
                >
                  Remove
                </Button>
              )}
            </div>

            <div className="grid grid-cols-1 md:grid-cols-3 gap-3">
              <div>
                <Input
                  {...register(`teamMembers.${index}.name`, {
                    required: 'Name is required'
                  })}
                  placeholder="Full Name"
                />
                {errors.teamMembers?.[index]?.name && (
                  <p className="text-sm text-red-600 mt-1">
                    {errors.teamMembers[index]?.name?.message}
                  </p>
                )}
              </div>

              <div>
                <Input
                  {...register(`teamMembers.${index}.email`, {
                    required: 'Email is required',
                    pattern: /^\S+@\S+$/i
                  })}
                  type="email"
                  placeholder="Email"
                />
                {errors.teamMembers?.[index]?.email && (
                  <p className="text-sm text-red-600 mt-1">
                    {errors.teamMembers[index]?.email?.message}
                  </p>
                )}
              </div>

              <div>
                <Input
                  {...register(`teamMembers.${index}.role`, {
                    required: 'Role is required'
                  })}
                  placeholder="Role"
                />
                {errors.teamMembers?.[index]?.role && (
                  <p className="text-sm text-red-600 mt-1">
                    {errors.teamMembers[index]?.role?.message}
                  </p>
                )}
              </div>
            </div>
          </div>
        ))}

        <Button
          type="button"
          variant="outline"
          onClick={() => append({ name: '', email: '', role: '' })}
          className="w-full"
        >
          Add Team Member
        </Button>
      </div>

      <Button type="submit" className="w-full">
        Create Project
      </Button>
    </form>
  )
}
```

### 5. Form Validation dengan Schema

#### a. Integrasi dengan Zod

```typescript
// src/lib/validations.ts
import { z } from 'zod'

// Zod Schema
export const loginSchema = z.object({
  email: z
    .string()
    .email('Invalid email address')
    .min(1, 'Email is required'),
  password: z
    .string()
    .min(8, 'Password must be at least 8 characters')
    .min(1, 'Password is required')
})

export const registerSchema = z.object({
  firstName: z.string().min(1, 'First name is required'),
  lastName: z.string().min(1, 'Last name is required'),
  email: z.string().email().min(1, 'Email is required'),
  password: z
    .string()
    .min(8, 'Password must be at least 8 characters')
    .regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/, 'Password must contain uppercase, lowercase, and number')
    .min(1, 'Password is required'),
  confirmPassword: z
    .string()
    .min(1, 'Please confirm your password')
}).refine((data) => data.password === data.confirmPassword, {
  message: 'Passwords must match',
  path: ['confirmPassword']
})
```

```typescript
// src/components/ValidatedForm.tsx
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import { registerSchema } from '@/lib/validations'

interface RegisterForm {
  firstName: string
  lastName: string
  email: string
  password: string
  confirmPassword: string
}

export default function ValidatedForm() {
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting }
  } = useForm<RegisterForm>({
    resolver: zodResolver(registerSchema)
  })

  const onSubmit = async (data: RegisterForm) => {
    await new Promise(resolve => setTimeout(resolve, 1000))
    console.log(data)
  }

  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-4 max-w-md">
      <div>
        <Input
          {...register('firstName')}
          placeholder="First Name"
        />
        {errors.firstName && (
          <p className="text-sm text-red-600 mt-1">{errors.firstName.message}</p>
        )}
      </div>

      <div>
        <Input
          {...register('lastName')}
          placeholder="Last Name"
        />
        {errors.lastName && (
          <p className="text-sm text-red-600 mt-1">{errors.lastName.message}</p>
        )}
      </div>

      <div>
        <Input
          {...register('email')}
          type="email"
          placeholder="Email"
        />
        {errors.email && (
          <p className="text-sm text-red-600 mt-1">{errors.email.message}</p>
        )}
      </div>

      <div>
        <Input
          {...register('password')}
          type="password"
          placeholder="Password"
        />
        {errors.password && (
          <p className="text-sm text-red-600 mt-1">{errors.password.message}</p>
        )}
      </div>

      <div>
        <Input
          {...register('confirmPassword')}
          type="password"
          placeholder="Confirm Password"
        />
        {errors.confirmPassword && (
          <p className="text-sm text-red-600 mt-1">{errors.confirmPassword.message}</p>
        )}
      </div>

      <Button type="submit" disabled={isSubmitting} className="w-full">
        {isSubmitting ? 'Creating Account...' : 'Create Account'}
      </Button>
    </form>
  )
}
```

### 6. Advanced Integration Patterns

#### a. Form dengan File Upload

```typescript
// src/components/FileUploadForm.tsx
import { useState, useEffect } from 'react'
import { useForm } from 'react-hook-form'
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'

interface FileFormData {
  title: string
  description: string
  file: FileList
}

export default function FileUploadForm() {
  const [preview, setPreview] = useState<string | null>(null)
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
    watch
  } = useForm<FileFormData>()

  const fileInput = watch('file')

  // Preview image when file is selected
  useEffect(() => {
    if (fileInput?.[0]) {
      const file = fileInput[0]
      const reader = new FileReader()
      reader.onload = (e) => {
        setPreview(e.target?.result as string)
      }
      reader.readAsDataURL(file)
    }
  }, [fileInput])

  const onSubmit = async (data: FileFormData) => {
    const formData = new FormData()
    formData.append('title', data.title)
    formData.append('description', data.description)
    formData.append('file', data.file[0])

    // Simulate API call
    await new Promise(resolve => setTimeout(resolve, 2000))
    console.log('Form data:', Object.fromEntries(formData))
  }

  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-6 max-w-md">
      <div>
        <Input
          {...register('title', { required: 'Title is required' })}
          placeholder="Document Title"
        />
        {errors.title && (
          <p className="text-sm text-red-600 mt-1">{errors.title.message}</p>
        )}
      </div>

      <div>
        <textarea
          {...register('description', { required: 'Description is required' })}
          placeholder="Description"
          className="w-full px-3 py-2 border rounded-md min-h-[100px]"
        />
        {errors.description && (
          <p className="text-sm text-red-600 mt-1">{errors.description.message}</p>
        )}
      </div>

      <div>
        <Input
          {...register('file', { required: 'File is required' })}
          type="file"
          accept="image/*,.pdf,.doc,.docx"
        />
        {errors.file && (
          <p className="text-sm text-red-600 mt-1">{errors.file.message}</p>
        )}
      </div>

      {preview && (
        <div className="mt-4">
          <img
            src={preview}
            alt="Preview"
            className="max-w-full h-48 object-cover rounded-md"
          />
        </div>
      )}

      <Button type="submit" disabled={isSubmitting} className="w-full">
        {isSubmitting ? 'Uploading...' : 'Upload Document'}
      </Button>
    </form>
  )
}
```

#### b. Form dengan Real-time Validation

```typescript
// src/components/RealTimeForm.tsx
import { useForm } from 'react-hook-form'
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'

interface ContactForm {
  name: string
  email: string
  phone: string
  message: string
}

export default function RealTimeForm() {
  const {
    register,
    handleSubmit,
    formState: { errors, isValid, isDirty },
    watch
  } = useForm<ContactForm>({
    mode: 'onChange' // Enable real-time validation
  })

  const watchAllFields = watch()

  const onSubmit = async (data: ContactForm) => {
    await new Promise(resolve => setTimeout(resolve, 1000))
    console.log(data)
  }

  const getFieldStatus = (fieldName: keyof ContactForm) => {
    if (errors[fieldName]) return 'error'
    if (watchAllFields[fieldName]) return 'success'
    return 'default'
  }

  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-4 max-w-md">
      <div>
        <Input
          {...register('name', {
            required: 'Name is required',
            minLength: {
              value: 2,
              message: 'Name must be at least 2 characters'
            }
          })}
          placeholder="Full Name"
          className={getFieldStatus('name') === 'error' ? 'border-red-500' : ''}
        />
        {errors.name && (
          <p className="text-sm text-red-600 mt-1">{errors.name.message}</p>
        )}
      </div>

      <div>
        <Input
          {...register('email', {
            required: 'Email is required',
            pattern: /^\S+@\S+$/i
          })}
          type="email"
          placeholder="Email"
          className={getFieldStatus('email') === 'error' ? 'border-red-500' : ''}
        />
        {errors.email && (
          <p className="text-sm text-red-600 mt-1">{errors.email.message}</p>
        )}
      </div>

      <div>
        <Input
          {...register('phone', {
            pattern: /^[\+]?[1-9][\d]{0,15}$/
          })}
          type="tel"
          placeholder="Phone (optional)"
        />
        {errors.phone && (
          <p className="text-sm text-red-600 mt-1">{errors.phone.message}</p>
        )}
      </div>

      <div>
        <textarea
          {...register('message', {
            required: 'Message is required',
            minLength: {
              value: 10,
              message: 'Message must be at least 10 characters'
            }
          })}
          placeholder="Your message"
          className={`w-full px-3 py-2 border rounded-md min-h-[100px] ${
            getFieldStatus('message') === 'error' ? 'border-red-500' : ''
          }`}
        />
        {errors.message && (
          <p className="text-sm text-red-600 mt-1">{errors.message.message}</p>
        )}
      </div>

      <Button
        type="submit"
        disabled={!isValid || isSubmitting}
        className="w-full"
      >
        {isSubmitting ? 'Sending...' : 'Send Message'}
      </Button>
    </form>
  )
}
```

---

## Rangkuman

### Apa yang Telah Dipelajari

Pada modul **BAB 4.5: React Hook Form dan Integrasi dengan shadcn/ui**, kita telah mempelajari:

- Konsep dasar React Hook Form dan keunggulannya dalam performa
- Setup dan instalasi dengan React 19 dan TypeScript
- Integrasi dengan shadcn/ui 3.4.2 dan Tailwind CSS 4
- Implementasi form patterns seperti multi-step dan dynamic forms
- Validasi form dengan schema validation (Zod)
- Advanced features seperti file upload dan real-time validation

### Poin-Poin Penting

✅ React Hook Form fundamentals dan performance benefits
✅ shadcn/ui integration dengan custom components
✅ Form validation dengan schema dan real-time feedback
✅ Multi-step dan dynamic form patterns
✅ File upload dan advanced form features
✅ Best practices untuk form handling di React 19

---

## Evaluasi Harian

Berikut adalah tugas yang harus dikerjakan oleh santri pada hari ke-23:

1. **Basic Form Implementation**
   - Buat form registrasi menggunakan React Hook Form dengan shadcn/ui components.
   - Implementasikan validasi dasar untuk email, password, dan required fields.

2. **Multi-Step Form**
   - Buat multi-step form untuk proses checkout atau survey.
   - Sertakan progress indicator dan validasi per step.

3. **Dynamic Form dengan Validation**
   - Implementasikan form dengan dynamic fields (array fields).
   - Gunakan schema validation dengan Zod.

4. **Advanced Integration**
   - Buat form dengan file upload dan preview.
   - Implementasikan real-time validation dan form submission.

> **Catatan:**
> - Tugas dikerjakan secara individu dan dikumpulkan dalam bentuk repository GitHub.
> - Gunakan React 19, TypeScript, Tailwind CSS 4, dan shadcn/ui 3.4.2.
> - Sertakan dokumentasi setup dan penjelasan implementasi.
> - Pastikan form handling sudah optimal dengan React Hook Form.